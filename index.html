<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HovaLett ‚Äì Elveszett √©s tal√°lt t√°rgyak</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <header class="page-header">
    <h1>HovaLett</h1>
    <p>Jelentsd be, ha tal√°lt√°l vagy elvesztett√©l valamit!</p>
    <div class="button-row">
      <button id="foundBtn">Tal√°ltam valamit</button>
      <button id="lostBtn">Elvesztettem valamit</button>
    </div>

    <div id="topMenu">
      <button id="myReportsBtn" class="menu-btn">Felad√°saim</button>
      <button id="myMessagesBtn" class="menu-btn">√úzeneteim</button>
      <button id="menuLoginBtn" class="menu-btn">Bejelentkez√©s</button>
      <button id="homeBtn" class="menu-btn hidden">F≈ëoldal</button>
      <button id="logoutBtn" class="menu-btn hidden">Kijelentkez√©s</button>
      <span id="loggedUser" class="logged-user hidden">Bejelentkezve: Felhaszn√°l√≥</span>
    </div>
    <small id="supabaseStatus"></small>
  </header>

  <div class="main-container">
    <div id="leftPanel">
      <h2>Sz≈±r√©s</h2>
      <div class="filter-group">
        <button id="filterTalaltam" class="filter-btn green active">Tal√°ltam</button>
        <button id="filterKeresem" class="filter-btn red active">Keresem</button>
      </div>
      <div class="filter-categories">
        <button class="filter-cat active" data-cat="Telefon -√©s Kieg√©sz√≠t≈ëk">Telefon -√©s Kieg√©sz√≠t≈ëk</button>
        <button class="filter-cat active" data-cat="P√©nz, P√©nzt√°rca">P√©nz, P√©nzt√°rca</button>
        <button class="filter-cat active" data-cat="Okm√°nyok">Okm√°nyok</button>
        <button class="filter-cat active" data-cat="Ruh√°zat, t√°ska">Ruh√°zat, t√°ska</button>
        <button class="filter-cat active" data-cat="Kulcs">Kulcs</button>
        <button class="filter-cat active" data-cat="H√°zi√°llat">H√°zi√°llat</button>
        <button class="filter-cat active" data-cat="√âkszer">√âkszer</button>
        <button class="filter-cat active" data-cat="Egy√©b">Egy√©b</button>
      </div>
    </div>

    <div id="map"></div>

    <div id="rightPanel">
      <h2>Legfrissebb jelent√©sek</h2>
      <div id="reportItems" class="report-list"></div>
    </div>
  </div>

  <div id="profileView" class="hidden">
    <div class="profile-user"><strong>Felhaszn√°l√≥:</strong> <span id="profileUserInfo"></span></div>
    <div class="profile-columns">
      <div>
        <h3>Saj√°t bejelent√©sek</h3>
        <div id="myReportsList" class="report-list"></div>
      </div>
      <div>
        <h3>√úzenetek (bej√∂v≈ë / kimen≈ë)</h3>
        <div id="messageList" class="report-list"></div>
      </div>
    </div>
  </div>

  <div id="bejelentesBox" class="hidden">
    <div id="markerForm" class="hidden">
      <input type="file" id="photoInput" accept="image/*" /><br><br>
      <textarea id="descriptionInput" rows="4" cols="40" placeholder="Le√≠r√°s..."></textarea><br><br>
      <input type="text" id="contactInput" placeholder="El√©rhet≈ës√©g (opcion√°lis)" /><br><br>
      <div id="j√°ratBox" class="hidden">
        <input type="text" id="routeInput" placeholder="J√°ratsz√°m (pl. 7-es busz)" /><br><br>
      </div>
      <button id="saveBtn">Ment√©s</button>
    </div>
    <button class="back-btn">F≈ëoldal</button>
  </div>

  <div id="modal" class="modal hidden">
    <div class="modal-content"></div>
  </div>

  <div id="valasztoModal" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close-btn" data-flow-close="true" aria-label="Bez√°r√°s">‚úï</button>
      <h3>Hol tal√°ltad vagy hol vesztetted el?</h3>
      <div class="valaszto-buttons">
        <button id="modalUtcaBtn">üìç Utc√°n/√âp√ºletben</button>
        <button id="modalJarmuBtn">üöç J√°rm≈±v√∂n</button>
      </div>
      <button id="valasztoBackBtn" class="modal-back-btn">Vissza</button>
    </div>
  </div>

  <div id="helyModal" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close-btn" data-flow-close="true" aria-label="Bez√°r√°s">‚úï</button>
      <p>K√©rlek, t≈±zd le a t√©rk√©pen a pontos helyet.</p>
      <button id="helyModalOkBtn">OK</button>
      <button id="helyBackBtn" class="modal-back-btn">Vissza</button>
    </div>
  </div>

  <div id="datumModal" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close-btn" data-flow-close="true" aria-label="Bez√°r√°s">‚úï</button>
      <h3>Mikor tal√°ltad vagy mikor vesztetted el?</h3>
      <label for="selectYear">√âv:</label>
      <select id="selectYear"></select><br><br>
      <label for="selectMonth">H√≥nap:</label>
      <select id="selectMonth"></select><br><br>
      <label for="selectDay">Nap:</label>
      <select id="selectDay"></select><br><br>
      <p>Nap: <strong id="dayOfWeek"></strong></p>
      <button id="datumModalOkBtn">OK</button>
      <button id="datumBackBtn" class="modal-back-btn">Vissza</button>
    </div>
  </div>

  <div id="kategoriavalasztoModal" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close-btn" data-flow-close="true" aria-label="Bez√°r√°s">‚úï</button>
      <h3>Milyen t√≠pus√∫ t√°rgyr√≥l van sz√≥?</h3>
      <div class="kat-grid">
        <button class="kat-valaszto-btn">Telefon</button>
        <button class="kat-valaszto-btn">P√©nzt√°rca</button>
        <button class="kat-valaszto-btn">Okm√°ny</button>
        <button class="kat-valaszto-btn">Kulcs</button>
        <button class="kat-valaszto-btn">Ruh√°zat</button>
        <button class="kat-valaszto-btn">H√°zi√°llat</button>
        <button class="kat-valaszto-btn">√âkszer</button>
        <button class="kat-valaszto-btn">Egy√©b</button>
      </div>
      <button id="kategoriaBackBtn" class="modal-back-btn">Vissza</button>
    </div>
  </div>

  <div id="messageModal" class="modal hidden">
    <div class="modal-content">
      <h3 id="messageModalTitle">Els≈ë kapcsolatfelv√©tel</h3>
      <textarea id="messageBody" rows="5" placeholder="√çrd ide az √ºzenetedet..."></textarea><br><br>
      <button id="sendFirstMessageBtn">K√ºld√©s</button>
      <button id="cancelFirstMessageBtn">M√©gse</button>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js"></script>
</body>
</html>
